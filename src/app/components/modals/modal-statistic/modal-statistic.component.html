<h2 class="dialog-title">Statistique</h2>
<div (click)="popupRef.close()" class="close">
  <svg-icon svgName="close"/>
</div>

<div class="popup-content">
  <ng-container>
    <div class="stat-item">
      <div class="stat-card">
        <div class="stat-card-value">{{ data.games.length }}</div>
        <div class="stat-card-label">Parties</div>
      </div>
      <div class="stat-card">
        <div class="stat-card-value">{{ percentWin }}</div>
        <div class="stat-card-label">Victoires (%)</div>
      </div>
      <div class="stat-card">
        <div class="stat-card-value">{{ currentStreak }}</div>
        <div class="stat-card-label">Serie actuel</div>
      </div>
      <div class="stat-card">
        <div class="stat-card-value">{{ bestStreak }}</div>
        <div class="stat-card-label">Meilleure série</div>
      </div>
    </div>
  </ng-container>

  <ng-container>
    <div class="perform">
      <br />
      <h2>Performances :</h2>
      <div class="perform-container">
        <div
          *ngFor="let attempts of bestAttempts; let i = index; let last = last"
        >
          <div class="perform-item">
            <div class="first-item" *ngIf="!last; else failTemp">
              {{ i + 1 }} :
            </div>
            <ng-template #failTemp>
              <div class="last-item"><svg-icon svgName="close" /> :</div>
            </ng-template>
            <progress [value]="attempts * 10" max="100"></progress>
            {{ attempts }}
            <br />
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-container>
    <div *ngIf="status() as statusValue">
      <div *ngIf="statusValue !== 'IN_PROGRESS'" class="solution-container">
        <div class="sub">Le mot était</div>
        <h2 class="solution" *ngIf="solution() as solutionValue">
          <span *ngFor="let s of solutionValue.split('')">{{ s }}</span>
        </h2>

        <div class="sharedable">
          <button
            [cdkCopyToClipboard]="url"
            (click)="clipBord()"
            awesomeTooltip="Lien copié"
            [withClick]="true"
            aria-label="Button that displays a tooltip that can be programmatically disabled"
            [cdkCopyToClipboard]="url"
            class="share-btn"
            type="button"
          >
            <span>Partager</span>
          </button>
        </div>
      </div>
    </div>
  </ng-container>
</div>
